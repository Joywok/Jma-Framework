!function(n,r){"use strict";var t={};n.PubSub=t,function(n){function r(n){var r;for(r in n)if(n.hasOwnProperty(r))return!0;return!1}function t(n){return function(){throw n}}function e(n,r,e){try{n(r,e)}catch(n){setTimeout(t(n),0)}}function o(n,r,t){n(r,t)}function i(n,r,t,i){var u,f=c[r],s=i?o:e;if(c.hasOwnProperty(r))for(u in f)f.hasOwnProperty(u)&&s(f[u],n,t)}function u(n,r,t){return function(){var e=String(n),o=e.lastIndexOf(".");for(i(n,n,r,t);-1!==o;)e=e.substr(0,o),o=e.lastIndexOf("."),i(n,e,r,t)}}function f(n){for(var t=String(n),e=Boolean(c.hasOwnProperty(t)&&r(c[t])),o=t.lastIndexOf(".");!e&&-1!==o;)t=t.substr(0,o),o=t.lastIndexOf("."),e=Boolean(c.hasOwnProperty(t)&&r(c[t]));return e}function s(n,r,t,e){var o=u(n,r,e);return!!f(n)&&(!0===t?o():setTimeout(o,0),!0)}var c={},a=-1;n.publish=function(r,t){return s(r,t,!1,n.immediateExceptions)},n.publishSync=function(r,t){return s(r,t,!0,n.immediateExceptions)},n.subscribe=function(n,r){if("function"!=typeof r)return!1;c.hasOwnProperty(n)||(c[n]={});var t="uid_"+String(++a);return c[n][t]=r,t},n.clearAllSubscriptions=function(){c={}},n.clearSubscriptions=function(n){var r;for(r in c)c.hasOwnProperty(r)&&0===r.indexOf(n)&&delete c[r]},n.unsubscribe=function(r){var t,e,o,i="string"==typeof r&&(c.hasOwnProperty(r)||function(n){var r;for(r in c)if(c.hasOwnProperty(r)&&0===r.indexOf(n))return!0;return!1}(r)),u=!i&&"string"==typeof r,f="function"==typeof r,s=!1;if(i)return void n.clearSubscriptions(r);for(t in c)if(c.hasOwnProperty(t)){if(e=c[t],u&&e[r]){delete e[r],s=r;break}if(f)for(o in e)e.hasOwnProperty(o)&&e[o]===r&&(delete e[o],s=!0)}return s}}(t),"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports&&(void 0!==module&&module.exports&&(exports=module.exports=t),exports.PubSub=t,module.exports=exports=t)}("object"==typeof window&&window||this);